---
# Variables definitions for playbook.yml

versions:
  helm: 3.19.0
  minikube: 1.37.0
  kubectl: 1.34.0
  uv: 0.9.8
  containerd: 1.7.27-1
  cni_plugins: 1.8.0
  crictl: 1.34.0
  cri_dockerd: 0.3.21
  open5gs_chart: 2.3.3
  ueransim_gnb_chart: 0.2.6
  istio: 1.28.0

docker_users:
  - "vagrant"

apt_packages:
  - git
  - jq
  - yq
  - wget
  - tree
  - python3
  - python3-pip
  - python3-venv
  - python3-yaml
  - python3-kubernetes
  - apt-transport-https
  - ca-certificates
  - curl
  - gnupg
  - lsb-release
  - docker-ce
  - docker-ce-cli
  - containerd.io={{ versions.containerd }}
  - docker-buildx-plugin
  - docker-compose-plugin
  - conntrack

curl_packages:
  - link: https://github.com/kubernetes/minikube/releases/download/v{{ versions.minikube }}/minikube-linux-amd64
    filename: minikube
  - link: https://dl.k8s.io/release/v{{ versions.kubectl }}/bin/linux/amd64/kubectl
    filename: kubectl

zips:
  - url: "https://get.helm.sh/helm-v{{ versions.helm }}-linux-amd64.tar.gz"
    dest: "/tmp/helm-v{{ versions.helm }}-linux-amd64.tar.gz"
    unpack_dir: "/tmp"
    tool_path: "/tmp/linux-amd64/helm"
    binary: "helm"
  - url: "https://github.com/astral-sh/uv/releases/download/{{ versions.uv }}/uv-x86_64-unknown-linux-gnu.tar.gz"
    dest: "/tmp/uv-x86_64-unknown-linux-gnu.tar.gz"
    unpack_dir: "/tmp"
    tool_path: "/tmp/uv-x86_64-unknown-linux-gnu/uv"
    binary: "uv"
  - url: "https://github.com/containernetworking/plugins/releases/download/v{{ versions.cni_plugins }}/cni-plugins-linux-amd64-v{{ versions.cni_plugins }}.tgz"
    dest: "/tmp/cni-plugins-linux-amd64-v{{ versions.cni_plugins }}.tgz"
    unpack_dir: "/opt/cni/bin/"
  - url: "https://github.com/kubernetes-sigs/cri-tools/releases/download/v{{ versions.crictl }}/crictl-v{{ versions.crictl }}-linux-amd64.tar.gz"
    dest: "/tmp/crictl-v{{ versions.crictl }}-linux-amd64.tar.gz"
    unpack_dir: "/tmp"
    tool_path: "/tmp/crictl"
    binary: "crictl"
  - url: "https://github.com/Mirantis/cri-dockerd/releases/download/v{{ versions.cri_dockerd }}/cri-dockerd-{{ versions.cri_dockerd }}.amd64.tgz"
    dest: "/tmp/cri-dockerd-{{ versions.cri_dockerd }}.amd64.tgz"
    unpack_dir: "/tmp"
    tool_path: "/tmp/cri-dockerd/cri-dockerd"
    binary: "cri-dockerd"
  - url: "https://github.com/istio/istio/releases/download/{{ versions.istio }}/istio-{{ versions.istio }}-linux-amd64.tar.gz"
    dest: "/tmp/istio-{{ versions.istio }}-linux-amd64.tar.gz"
    unpack_dir: /tmp
    tool_path: /tmp/istio-{{ versions.istio }}/bin/istioctl
    binary: istioctl

helm_packages:
  - name: open5gs
    repo_url: "oci://registry-1.docker.io/gradiantcharts/open5gs"
    version: "{{ versions.open5gs_chart }}"
    values_path: "/vagrant/inputs/helm/open5gc-values.yml"
  - name: ueransim-gnb
    repo_url: "oci://registry-1.docker.io/gradiant/ueransim-gnb"
    version: "{{ versions.ueransim_gnb_chart }}"
    values_path: "/vagrant/inputs/helm/gnb-ues-values.yml"
